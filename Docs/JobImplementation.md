# **JobImplementation**

## **Overview**

the job implementation smart contract designed to manage create/applying job mechanism and store the data and manage the deposits and withdraws.

### Key Functions and Data Structure :

**Mappings** :

`mapping(uint256 => Job) public jobs;` : mapping with job ID addressed with a struct of job information.  
`mapping(uint256 => mapping(address => uint256)) public guaranteeAmounts;` : tracking guarantee amounts per job and freelancer, so every freelancer need to deposit a Percentage of the budget for guarantee and Commitment.

**Functions :**

| **Function Name** | **Description**                                                                                                                                                                                            | **Access Control**     | **Parameters**                                                                                                                                                                                                                                                       |
| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| createJob         | Function to create a job. Only clients can create jobs, and the freelancer can be `address(0)` or an actual address, allowing the client to choose an actual freelancer or let freelancers bid on the job. | clientOnly             | \_budget: Job budget (e.g., 1000 $).<br>\_token: ERC20 Token that will be used for payment.<br>\_deadline: Job deadline (e.g., 1 week).<br>\_ipfs: The IPFS hash containing the job description and details.<br>\_freelancer: The address of the freelancer, if any. |
| submitProposal    | Function to submit a proposal for a job. Only freelancers can submit proposals. **Notice**: The proposal will be encrypted to the client address and stored on IPFS.                                       | freelancersOnly        | \_jobId: The ID of the job.<br>\_EncryptedIpfsCID: The IPFS hash of the proposal.                                                                                                                                                                                    |
| acceptProposal    | Function to accept a proposal for a job. Only clients can accept proposals for their jobs or assign a freelancer to the job.                                                                               | JobOwnerOnly           | \_jobId: The ID of the job.<br>\_freelancer: The accepted freelancer.                                                                                                                                                                                                |
| assignFreelancer  | Function to assign a freelancer to a job. Only clients can assign freelancers to their jobs; the client can assign anyone they want to benefit from the protocol's mechanism.                              | JobOwnerOnly           | \_jobId: The ID of the job.<br>\_freelancer: The accepted freelancer.                                                                                                                                                                                                |
| approveWork       | Function to approve that the work is done from both the freelancer and client sides.                                                                                                                       | clientOrFreelancerOnly | \_jobId: The ID of the job.<br>approve: Boolean indicating if the work is done (true) or not (false).                                                                                                                                                                |
| cancelJob         | Function to cancel the job.                                                                                                                                                                                | JobOwnerOnly           | \_jobId: The ID of the job.                                                                                                                                                                                                                                          |
| dispute           | Function for dispute resolution, callable by either the job owner or the freelancer.                                                                                                                       | clientOrFreelancerOnly | \_jobId: The ID of the job.                                                                                                                                                                                                                                          |
| rateUser          | Function to rate the user at the end of the job/task. It should enforce the client to rate the user.                                                                                                       | JobOwnerOnly           | \_jobId: The ID of the job.<br>rating: Rate from 0 to 5.                                                                                                                                                                                                             |
|                   |                                                                                                                                                                                                            |                        |                                                                                                                                                                                                                                                                      |

### **Notes**

- The contract uses basis points for percentage calculations (10000 = 100%).
